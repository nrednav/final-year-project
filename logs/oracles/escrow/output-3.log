
> oracles@1.0.0 escrow /c/Users/Vandern Rodrigues/Projects/fyp/oracles
> babel-node ./src/escrowOracle.js

The escrow oracle is now listening for events...
Escrow Oracle started...
Found event:-
 buyer_deposit_complete
{ address: '0x46D1a3a211c5A261ED481f6d871DE4e4a0D50048',
  blockNumber: 248,
  transactionHash:
   '0x30b60aaf9426bb597a66dd89bb244bbc1867b0d1a59e09d3829283628d09046b',
  transactionIndex: 0,
  blockHash:
   '0x3a6a7b1744652c87844c8dccc9fa73f6ee1fec625fcc10e1eebc813ae7c9a3b0',
  logIndex: 0,
  removed: false,
  id:
   'log_0x407e71555e4c83bdacf34f23413f9ad0b1bfcc850855c7e128c3b73ad7abdf72',
  returnValues: {},
  event: 'buyer_deposit_complete',
  signature:
   '0x43270d591744ea0d1e0029cd7d0c92a69a1e4d6d14aa575c812c62300dc42b03',
  raw:
   { data: null,
     topics:
      [ '0x43270d591744ea0d1e0029cd7d0c92a69a1e4d6d14aa575c812c62300dc42b03' ] } }
Getting participants...
Updating session...
Successfully updated Session #: 5cdf1667c8f28350063e6273
Found event:-
 title_transfer_requested
{ address: '0x46D1a3a211c5A261ED481f6d871DE4e4a0D50048',
  blockNumber: 261,
  transactionHash:
   '0xe4c5891fbce2cce211b3c52aa6feff4db60f7137f47267f5e2c8d829e1510cbd',
  transactionIndex: 0,
  blockHash:
   '0x2e5c4ac1949330bcdf4abd13b6866a2c6a4cdd69d6c5f57d259e141cfd890bc8',
  logIndex: 0,
  removed: false,
  id:
   'log_0x421656904f2ba741a663833f67b0f65f4fb24cc594e307bc73893a773fea1466',
  returnValues: {},
  event: 'title_transfer_requested',
  signature:
   '0xa65551aa3a105e8f97709f58b42ccca7365b7f76b8ae65c2257b92c3b088a7a5',
  raw:
   { data: null,
     topics:
      [ '0xa65551aa3a105e8f97709f58b42ccca7365b7f76b8ae65c2257b92c3b088a7a5' ] } }
{ stages:
   { '1':
      { name: 'Holding Deposit',
        status: 'Completed',
        holding_deposit_address: '0x924ad28B07db87ADbCC7356c9171cF8fe44B4F3F',
        deposit_amount: 2500,
        deposit_status: 'Paid',
        deadline: 2019-09-09T00:00:00.000Z },
     '2':
      { name: 'Background Screening',
        status: 'Completed',
        verification_status: 'Verified',
        buyer_screening_uid:
         '0xac4a446b5498631132babbd0a105ca52196b1318f69a410f99790505fa671cf6' },
     '3':
      { sc_hashes: [Object],
        name: 'Sales Contract',
        status: 'Completed',
        contract_status: 'Signed',
        sale_contract_id: '5cdf16cec8f28350063e6274',
        signed_sale_contract_id: '5cdf16d9c8f28350063e627a',
        sc_hash_status: false,
        agreed_sale_price: 75000 },
     '4':
      { mini_stages: [Object],
        name: 'Escrow',
        status: 'In Progress',
        escrow_contract_address: '',
        active_mini_stage: 2 } },
  progress: 3,
  _id: 5cdf1667c8f28350063e6273,
  property_id: '5cdf1611c8f28350063e626f',
  buyer_id: '5cdf159fc8f28350063e6266',
  seller_id: '5cdf1536c8f28350063e6264',
  buyer_address: '0xe6bf10ffadd7571fccece7dc0247e30d37f02b88',
  seller_address: '0xe2a2ef60fcb1f39186d8261b0951fbd178650f3b',
  created_at: 2019-05-17T20:15:35.735Z,
  __v: 0 }
Collecting necessary information for title transfer...
Generating new property uid...
Transferring title...
Successfully transfered title: 
[object Object]
{ n: 1, nModified: 1, ok: 1 }
Successfully updated Session #: 5cdf1667c8f28350063e6273
{ message: 'uploaded' }
Found event:-
 commit_title_transfer
{ address: '0x46D1a3a211c5A261ED481f6d871DE4e4a0D50048',
  blockNumber: 285,
  transactionHash:
   '0x199f6164fd5fcea2f397922051b18033980c56c08f295850d9ac66db59dff394',
  transactionIndex: 0,
  blockHash:
   '0xb570a47144d8ac46116810a26d204ad4c49083cee1da8f7e95497e24c5b57285',
  logIndex: 0,
  removed: false,
  id:
   'log_0xa6695316b8b7f2becdef8a038382e6d23476d8e01c5bd87c6a2e6221ebe4d545',
  returnValues: {},
  event: 'commit_title_transfer',
  signature:
   '0x15bcf09c9c3c9a97f930a992ea1d7cebdaf63d8f42692f9147beadd45d835629',
  raw:
   { data: null,
     topics:
      [ '0x15bcf09c9c3c9a97f930a992ea1d7cebdaf63d8f42692f9147beadd45d835629' ] } }
Found event:-
 escrow_closed
{ address: '0x46D1a3a211c5A261ED481f6d871DE4e4a0D50048',
  blockNumber: 285,
  transactionHash:
   '0x199f6164fd5fcea2f397922051b18033980c56c08f295850d9ac66db59dff394',
  transactionIndex: 0,
  blockHash:
   '0xb570a47144d8ac46116810a26d204ad4c49083cee1da8f7e95497e24c5b57285',
  logIndex: 3,
  removed: false,
  id:
   'log_0xc029f4ac8868aa84a1c26cfbac9a5238a2b7d83a52ffb25c08a8e42d3b953284',
  returnValues: {},
  event: 'escrow_closed',
  signature:
   '0xe1760e1470c9ffbe1944bf685aff5b043b446cc4cbb2ca06dfe196a5c031008f',
  raw:
   { data: null,
     topics:
      [ '0xe1760e1470c9ffbe1944bf685aff5b043b446cc4cbb2ca06dfe196a5c031008f' ] } }
Updated property information to set buyer as owner
{ n: 1, nModified: 1, ok: 1 }
Added property to buyer
{ n: 1, nModified: 1, ok: 1 }
Removed property from seller
{ n: 1, nModified: 1, ok: 1 }
{ status: 200,
  statusText: 'OK',
  headers:
   { 'x-powered-by': 'Express',
     'access-control-allow-origin': '*',
     'content-type': 'application/json; charset=utf-8',
     'content-length': '22',
     etag: 'W/"16-uLmXED9y+nvsaXhkkRngekVCElY"',
     date: 'Fri, 17 May 2019 20:20:47 GMT',
     connection: 'close' },
  config:
   { adapter: [Function: httpAdapter],
     transformRequest: { '0': [Function: transformRequest] },
     transformResponse: { '0': [Function: transformResponse] },
     timeout: 0,
     xsrfCookieName: 'XSRF-TOKEN',
     xsrfHeaderName: 'X-XSRF-TOKEN',
     maxContentLength: -1,
     validateStatus: [Function: validateStatus],
     headers:
      { Accept: 'application/json, text/plain, */*',
        'Content-Type': 'application/json;charset=utf-8',
        Authorization: 'a1b2c3d4e5f6g7',
        'User-Agent': 'axios/0.18.0',
        'Content-Length': 15 },
     method: 'post',
     url:
      'http://localhost:3000/api/sessions/5cdf1667c8f28350063e6273/upload-td',
     data: '{"upload":true}' },
  request:
   ClientRequest {
     _events:
      [Object: null prototype] {
        socket: [Function],
        abort: [Function],
        aborted: [Function],
        error: [Function],
        timeout: [Function],
        prefinish: [Function: requestOnPrefinish] },
     _eventsCount: 6,
     _maxListeners: undefined,
     outputData: [],
     outputSize: 0,
     writable: true,
     _last: true,
     chunkedEncoding: false,
     shouldKeepAlive: false,
     useChunkedEncodingByDefault: true,
     sendDate: false,
     _removedConnection: false,
     _removedContLen: false,
     _removedTE: false,
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: true,
     _headerSent: true,
     socket:
      Socket {
        connecting: false,
        _hadError: false,
        _parent: null,
        _host: 'localhost',
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 7,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        [Symbol(asyncId)]: 3396,
        [Symbol(kHandle)]: [TCP],
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]: null,
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     connection:
      Socket {
        connecting: false,
        _hadError: false,
        _parent: null,
        _host: 'localhost',
        _readableState: [ReadableState],
        readable: true,
        _events: [Object],
        _eventsCount: 7,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: false,
        allowHalfOpen: false,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: null,
        _server: null,
        parser: null,
        _httpMessage: [Circular],
        [Symbol(asyncId)]: 3396,
        [Symbol(kHandle)]: [TCP],
        [Symbol(lastWriteQueueSize)]: 0,
        [Symbol(timeout)]: null,
        [Symbol(kBytesRead)]: 0,
        [Symbol(kBytesWritten)]: 0 },
     _header:
      'POST /api/sessions/5cdf1667c8f28350063e6273/upload-td HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json;charset=utf-8\r\nAuthorization: a1b2c3d4e5f6g7\r\nUser-Agent: axios/0.18.0\r\nContent-Length: 15\r\nHost: localhost:3000\r\nConnection: close\r\n\r\n',
     _onPendingData: [Function: noopPendingOutput],
     agent:
      Agent {
        _events: [Object],
        _eventsCount: 1,
        _maxListeners: undefined,
        defaultPort: 80,
        protocol: 'http:',
        options: [Object],
        requests: {},
        sockets: [Object],
        freeSockets: {},
        keepAliveMsecs: 1000,
        keepAlive: false,
        maxSockets: Infinity,
        maxFreeSockets: 256 },
     socketPath: undefined,
     timeout: undefined,
     method: 'POST',
     path: '/api/sessions/5cdf1667c8f28350063e6273/upload-td',
     _ended: true,
     res:
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        _events: [Object],
        _eventsCount: 3,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 1,
        httpVersion: '1.1',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        aborted: false,
        upgrade: false,
        url: '',
        method: null,
        statusCode: 200,
        statusMessage: 'OK',
        client: [Socket],
        _consuming: false,
        _dumped: false,
        req: [Circular],
        responseUrl:
         'http://localhost:3000/api/sessions/5cdf1667c8f28350063e6273/upload-td',
        redirects: [] },
     aborted: false,
     timeoutCb: null,
     upgradeOrConnect: false,
     parser: null,
     maxHeadersCount: null,
     _redirectable:
      Writable {
        _writableState: [WritableState],
        writable: true,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        _options: [Object],
        _ended: true,
        _ending: true,
        _redirectCount: 0,
        _redirects: [],
        _requestBodyLength: 15,
        _requestBodyBuffers: [],
        _onNativeResponse: [Function],
        _currentRequest: [Circular],
        _currentUrl:
         'http://localhost:3000/api/sessions/5cdf1667c8f28350063e6273/upload-td' },
     [Symbol(isCorked)]: false,
     [Symbol(outHeadersKey)]:
      [Object: null prototype] {
        accept: [Array],
        'content-type': [Array],
        authorization: [Array],
        'user-agent': [Array],
        'content-length': [Array],
        host: [Array] } },
  data: { message: 'uploaded' } }
{ blockHash:
   '0x3ce794e70569d32d2c7ec1c319a904e495c7c5b69bfed12c6568fcf9deb6488e',
  blockNumber: 264,
  contractAddress: null,
  cumulativeGasUsed: 44291,
  from: '0x8a23c7C42333ed6be5a68c24031cd7A737fbcBE8',
  gasUsed: 44291,
  logsBloom:
   '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
  status: true,
  to: '0x46D1a3a211c5A261ED481f6d871DE4e4a0D50048',
  transactionHash:
   '0xe7a4318038d3e37c37275892558edf4798b5c5fd3d570ecb8ee6e44ced876a09',
  transactionIndex: 0,
  nonce: undefined,
  gas: undefined,
  events: {} }

> oracles@1.0.0 escrow /c/Users/Vandern Rodrigues/Projects/fyp/oracles
> babel-node ./src/escrowOracle.js

The escrow oracle is now listening for events...
Escrow Oracle started...
